

# 更新状态变量



tags: #日期/2023-04-24 #类型/想法 #内容/过程机制 



> [!info]
> 以下来自个人毕业论文课题相关的实验程序设计思路部分，仅做参考。



# 更新原则

当内部之变量变化时，涉及到外部之状态改变。一次计算各主体状态时，应该做到规则如下：
- 只能直接更新由外部的变量直接控制的状态，暨重新计算状态流向之源状态；


当源状态更新时，应该链式自动更新各目标状态，更新规则如下：
- 根据源状态更新目标状态时，只能由其状态之低一层状态（暨其包含的子状态）驱动更新，而不能由被包含的父状态更新；
- 根据源状态更新目标状态时，应该考虑更新相邻且不相容的状态；
- 根据源状态更新目标状态时，无需更新不相邻的、或者相容的、或者子级的状态；
- 如果目标状态需要在特定条件下触发其更新动作（例如手动更新），那么无须更新目标状态；



应该更新主体状态的时候：

- 如果严格按照ABM范式设计，原则上应该在每一个步长，检查与更新主体状态。这样程序可靠性好、可读性好、设计难度小，但是增加运算负担、增加运算时长；
- 如果为了运算速度，则当外部的变化时，可以先不更新，等到手动更新，但是这样程序可靠性变差、可读性变差、设计难度变大；


# 更新过程

更新过程如下：
1. 指定而计算源状态；
2. 决策是否更新向状态：
	- 根据状态关系表、是否自动更新情况、状态更新情况决策；
3. 需要更新的状态，更新相应的向状态；
4. 重复步骤2至3，直至无状态需要更新；


# 如何确定关系表

> [!example] 
> 以下是举例：
> 
> 步骤：确定直接关系于两个状态之间
> 1. 是否是同一种状态？
> 	- 同一种状态标记【同】；
> 2. 如果不是同一种状态，需要手动更新还是自动更新？
> 	- 手动更新标记【手】；
> 3. 如果是自动更新，那么是否存在直接关系？
> 	- 不存在直接关系标记【无】；
> 4. 如果存在直接关系，那么是确定的关系，还是非确定的关系？
> 	- 非确定的关系标记【惑】；
> 5. 如果是确定的关系，那么确定具体的关系：
> 	- 父子关系，分别标记【父】、【子】；
> 	- 互相排斥关系，标记【斥】；
> 	- 其它可以推导关系，标记【推】；





